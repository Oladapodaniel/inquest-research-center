<template>
    <div
        class="block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700">
        <div class="md:container">
            <h2 class="inter-medium text-2xl md:text-4xl text-primary-500 text-center">Clinical Trial Consent Form
            </h2>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Introduction</h2>
            <p class="text-neutral-600 dark:text-neutral-50">You are being invited to participate in a clinical trial, which
                is being conducted
                by Inquest Research Centre at The IRIC Building, Toronto, Ontario.
                The purpose of this study is to expedite the drug approval process. Your
                participation in this study is entirely voluntary.
            </p>

            <h1 class="inter-medium my-5 text-neutral-600 dark:text-neutral-50">Study Procedures:</h1>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Screening:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">Prospective participants will be screened to determine if they
                meet the inclusion
                and exclusion criteria for the study. This may involve a physical examination,
                medical history review, and laboratory tests.
            </p>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Informed Consent:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">Participants who meet the inclusion and exclusion criteria will
                be provided with
                an informed consent form, which outlines the study procedures, risks, and
                benefits. Participants will have the opportunity to ask questions and discuss
                any concerns with the study staff before signing the consent form.
            </p>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Baseline Assessments:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">Before the start of the study treatment, participants will
                undergo baseline
                assessments, including physical exams, laboratory tests, and other assessments
                as needed.
            </p>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Study Treatment:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">Participants will receive the study treatment according to the
                study protocol,
                which may involve receiving the drug being studied or a placebo. Participants
                will be monitored closely by the study staff throughout the treatment period.
            </p>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Follow-up Assessments:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">Participants will undergo follow-up assessments at regular
                intervals during and
                after the treatment period. These assessments may include physical exams,
                laboratory tests, and other assessments as needed.
            </p>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Data Collection and Analysis:</h2>
            <p class="text-neutral-600 dark:text-neutral-50">All study data will be collected and analyzed according to the
                study protocol.
                The results of the study will be reported to the study sponsor and regulatory
                authorities as appropriate.
            </p>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Close-out:
            </h2>
            <p class="text-neutral-600 dark:text-neutral-50">Once the study is complete, participants will undergo a final
                assessment, and
                any study-related materials or devices will be returned to the study staff.
                Participants will have the opportunity to discuss the results of the study with
                the study staff, and they will be provided with contact information for any
                further questions or concerns.
            </p>

            <h1 class="inter-medium my-5 text-neutral-600 dark:text-neutral-50">Risks and Benefits:</h1>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Risks</h2>
            <p class="text-neutral-600 dark:text-neutral-50">There may be side effects or adverse reactions to the study
                drug, which could
                be unpredictable or unknown.
            </p>
            <ul class="list-disc pl-[40px] mt-3 text-sm text-neutral-600 dark:text-neutral-50">
                <li class="mt-2">Some participants may receive a placebo, which means they will not receive
                    the active study drug, and their condition may not improve.
                </li>
                <li class="mt-2">
                    Some study procedures, such as blood draws or imaging scans, may cause
                    discomfort or pain.
                </li>
                <li class="mt-2">There may be potential risks associated with travel to and from the study site,
                    such as transportation or weather-related hazards.
                </li>
                <li class="mt-2">There may be potential risks associated with travel to and from the study site,
                    such as transportation or weather-related hazards.
                </li>
            </ul>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Benefits</h2>

            <ul class="list-disc pl-[40px] mt-3 text-sm text-neutral-600 dark:text-neutral-50">
                <li class="mt-2">Participants will have access to potentially ground-breaking treatments that
                    are not yet available to the public.
                </li>
                <li class="mt-2">
                    Participants will receive close medical attention and monitoring from qualified
                    healthcare professionals throughout the study.
                </li>
                <li class="mt-2">Participants may have the opportunity to contribute to the development of new
                    treatments for their condition, as well as for other patients in the future.
                </li>
                <li class="mt-2">Participants may receive compensation for their time and participation in the
                    study.
                </li>
                <li class="mt-2">Participants may have the opportunity to learn more about their condition and
                    potential treatments.
                </li>
            </ul>


            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Confidentiality:
            </h2>
            <p class="text-neutral-600 dark:text-neutral-50">All the information collected during this study will be kept
                confidential. Only
                authorized personnel will have access to the information. Your identity will not
                be revealed in any publications or presentations resulting from this study.
            </p>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Participant Rights:
            </h2>
            <p class="text-neutral-600 dark:text-neutral-50">You have the right to withdraw from this study at any time
                without penalty.
                You also have the right to refuse to answer any questions or perform any
                procedures during the study. If you have any questions or concerns about the
                study, you may contact the Chief Research Coordinator at
                enquiries@inquestresearchcenter.com.
            </p>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Consent :
            </h2>
            <p class="text-neutral-600 dark:text-neutral-50">I have read and understood the information provided above. I
                understand that
                my participation in this study is voluntary and that I may withdraw at any time
                without penalty. I consent to the study procedures and agree to comply with
                the study requirements.
            </p>


            <button type="button"
                class="mt-3 inline-block rounded border-2 border-primary-500 px-6 pb-[6px] pt-2 text-xs font-medium uppercase leading-normal text-primary-500 transition duration-150 ease-in-out hover:border-primary-600 hover:bg-neutral-500 hover:bg-opacity-10 hover:text-primary-600 focus:border-primary-600 focus:text-primary-600 focus:outline-none focus:ring-0 active:border-primary-700 active:text-primary-700 dark:hover:bg-neutral-100 dark:hover:bg-opacity-10"
                @click="$refs.signaturedialog.open()">
                Append signature
            </button>

            <VueModalityV3 ref="signaturedialog" :hide-header="true" :hide-footer="true" width="500px" :hide-cancel="true"
                centered>
                <div class="relative p-4">
                    <Vue3Signature ref="signature1" :sigOption="state.option" :w="'100%'" :h="'400px'"
                        :disabled="state.disabled" class="example"></Vue3Signature>
                    <div class="flex flex-wrap md:justify-end mt-3">
                        <button type="button" @click="clear"
                            class="ml-2 inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200">
                            Clear
                        </button>

                        <button type="button" @click="undo"
                            class="ml-2 inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200">
                            Undo
                        </button>

                        <button type="button" @click="handleDisabled"
                            class="ml-2 inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200">
                            {{ state.disabled ? 'Enable' : 'Disable' }}
                        </button>

                        <button type="button" aria-expanded="false" data-te-ripple-init
                            data-te-ripple-color="light" @click="downloadBase64File('',)"
                            class="ml-2 mt-2 sm:mt-0 inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200">
                            Download
                        </button>
                        <div class="relative" data-te-dropdown-ref>
                            <!-- <Dropdown ref="dropdowntheme">
                                
                                <template #trigger>
                                </template>
                                <ul class="bg-white dark:bg-neutral-600">
                                    <li @click="downloadBase64File('',)">
                                        <a class="block w-full whitespace-nowrap bg-transparent px-4 py-2 text-sm font-normal text-neutral-700 hover:bg-neutral-100 active:text-neutral-800 active:no-underline disabled:pointer-events-none disabled:bg-transparent disabled:text-neutral-400 dark:text-neutral-200 dark:hover:bg-neutral-600"
                                            href="#" data-te-dropdown-item-ref>Save as PNG</a>
                                    </li>
                                    <li @click="downloadBase64File('image/jpeg')">
                                        <a class="block w-full whitespace-nowrap bg-transparent px-4 py-2 text-sm font-normal text-neutral-700 hover:bg-neutral-100 active:text-neutral-800 active:no-underline disabled:pointer-events-none disabled:bg-transparent disabled:text-neutral-400 dark:text-neutral-200 dark:hover:bg-neutral-600"
                                            href="#" data-te-dropdown-item-ref>Save as JPEG</a>
                                    </li>
                                    <li @click="downloadBase64File('image/svg+xml')">
                                        <a class="block w-full whitespace-nowrap bg-transparent px-4 py-2 text-sm font-normal text-neutral-700 hover:bg-neutral-100 active:text-neutral-800 active:no-underline disabled:pointer-events-none disabled:bg-transparent disabled:text-neutral-400 dark:text-neutral-200 dark:hover:bg-neutral-600"
                                            href="#" data-te-dropdown-item-ref>Save as SVG</a>
                                    </li>
                                </ul>
                            </Dropdown> -->
                        </div>
                    </div>
                    <div
                        class="flex flex-shrink-0 flex-wrap items-center justify-end rounded-b-md border-t-2 border-neutral-100 border-opacity-100 pt-4 dark:border-opacity-50">
                        <button type="button"
                            class="inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200"
                            data-te-modal-dismiss data-te-ripple-init data-te-ripple-color="light">
                            Close
                        </button>
                        <button type="button" @click="save('image/jpeg')"
                            class="ml-1 inline-block rounded bg-primary-500 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]"
                            data-te-modal-dismiss data-te-ripple-init data-te-ripple-color="light">
                            Save changes
                        </button>
                    </div>
                </div>
            </VueModalityV3>

            <div data-te-modal-init
                class="fixed left-0 top-0 z-[1055] hidden h-full w-full overflow-y-auto overflow-x-hidden outline-none"
                id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-modal="true"
                role="dialog">
                <div data-te-modal-dialog-ref
                    class="pointer-events-none relative flex min-h-[calc(100%-1rem)] w-auto translate-y-[-50px] items-center opacity-0 transition-all duration-300 ease-in-out min-[576px]:mx-auto min-[576px]:mt-7 min-[576px]:min-h-[calc(100%-3.5rem)] min-[576px]:max-w-[500px]">
                    <div
                        class="pointer-events-auto relative flex w-full flex-col rounded-md border-none bg-white bg-clip-padding text-current shadow-lg outline-none dark:bg-neutral-600">
                        <div
                            class="flex flex-shrink-0 items-center justify-between rounded-t-md border-b-2 border-neutral-100 border-opacity-100 p-4 dark:border-opacity-50">
                            <!--Modal title-->
                            <h5 class="text-xl font-medium leading-normal text-neutral-800 dark:text-neutral-200"
                                id="exampleModalScrollableLabel">
                                Append your signature
                            </h5>
                            <!--Close button-->
                            <button type="button"
                                class="box-content rounded-none border-none hover:no-underline hover:opacity-75 focus:opacity-100 focus:shadow-none focus:outline-none"
                                data-te-modal-dismiss aria-label="Close">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                    stroke="currentColor" class="h-6 w-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>

                        <!--Modal body-->


                        <!--Modal footer-->

                    </div>
                </div>
            </div>

            <h2 class="inter-medium mt-5 text-neutral-600 dark:text-neutral-50">Participant Signature
            </h2>

            <div class=" w-[250px] h-[150px]  mt-3">
                <img :src="signature" class="w-full h-full" v-if="signature" />
            </div>
            <p class="inter-medium text-xl mt-3 text-neutral-600 dark:text-neutral-50">John Doe.</p>

            <div class="flex justify-end">
                <button type="button" @click="$emit('goback')"
                    class="mr-4 inline-block rounded bg-primary-100 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-primary-700 transition duration-150 ease-in-out hover:bg-primary-accent-100 focus:bg-primary-accent-100 focus:outline-none focus:ring-0 active:bg-primary-accent-200">
                    Back
                </button>
                <button @click="submit" type="button" data-te-ripple-init data-te-ripple-color="light"
                    data-te-target="#exampleModalCenterSubmit"
                    class="inter-medium inline-block rounded bg-primary-500 px-6 pb-2 pt-2.5 text-sm font-medium leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primarydeep hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primarydeep focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]">
                    Submit
                </button>

            </div>
        </div>
    </div>
</template>

<script setup>
import VueModalityV3 from 'vue-modality-v3'
import Dropdown from 'v-dropdown'
// Initialization for ES Users
import {
    Ripple,
    initTE
} from "tw-elements";
import { onMounted, reactive, ref } from "vue";
const emit = defineEmits(['signature', 'submitform'])
const signaturedialog = ref(null)
const state = reactive({
    count: 0,
    option: {
        penColor: "rgb(0, 0, 0)",
        backgroundColor: "rgb(245, 245, 245)"
    },
    disabled: false
})

const signature = ref(null)
const signature1 = ref(null)

const save = (t) => {
    signature.value = signature1.value.save(t)
    emit('signature', signature.value)
    signaturedialog.value.hide();
}

const clear = () => {
    signature1.value.clear()
}

const undo = () => {
    signature1.value.undo();
}

const downloadBase64File = (contentType, fileName) => {
    const linkSource = signature1.value.save(contentType);
    const downloadLink = document.createElement("a");
    downloadLink.href = linkSource;
    downloadLink.download = 'User Signature';
    downloadLink.click();
}

const addWaterMark = () => {
    signature1.value.addWaterMark({
        text: "mark text",          // watermark text, > default ''
        font: "20px Arial",         // mark font, > default '20px sans-serif'
        style: 'all',               // fillText and strokeText,  'all'/'stroke'/'fill', > default 'fill
        fillStyle: "red",           // fillcolor, > default '#333'
        strokeStyle: "blue",	       // strokecolor, > default '#333'
        x: 100,                     // fill positionX, > default 20
        y: 200,                     // fill positionY, > default 20
        sx: 100,                    // stroke positionX, > default 40
        sy: 200                     // stroke positionY, > default 40
    });
}

const fromDataURL = (url) => {
    signature1.value.fromDataURL("https://avatars2.githubusercontent.com/u/17644818?s=460&v=4");
}

const handleDisabled = () => {
    state.disabled = !state.disabled
}
onMounted(() => {
    initTE({ Ripple });
})

const submit = () => {
    emit('submitform')
}
</script>